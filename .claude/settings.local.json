{
  "permissions": {
    "allow": [
      "Bash(npx tsc:*)",
      "Bash(npm run build:*)",
      "Bash(scp:*)",
      "Bash(ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"chmod -R 755 /var/www/attendance-system/web-admin/dist/\")",
      "Bash(ssh:*)",
      "Bash(npx prisma generate)",
      "Bash(wc:*)",
      "Bash(powershell:*)",
      "Bash(curl:*)",
      "Bash(git add:*)",
      "Bash(git reset:*)",
      "Bash(git commit:*)",
      "Bash(git push)",
      "Bash(npx prisma migrate dev:*)",
      "Bash(dir \"C:\\\\Users\\\\Administrator\\\\Downloads\\\\attendance system\\\\attendance-system\\\\backend\\\\prisma\\\\migrations\")",
      "Bash(rd /s /q \"C:\\\\Users\\\\Administrator\\\\Downloads\\\\attendance system\\\\attendance-system\\\\backend\\\\prisma\\\\migrations\\\\manual\")",
      "Bash(del /f \"C:\\\\Users\\\\Administrator\\\\Downloads\\\\attendance system\\\\attendance-system\\\\backend\\\\prisma\\\\migrations\\\\nul\")",
      "Bash(del /f /q \"C:\\\\Users\\\\Administrator\\\\Downloads\\\\attendance system\\\\attendance-system\\\\backend\\\\prisma\\\\migrations\\\\tmpclaude*\")",
      "Bash(npx prisma db push:*)",
      "Bash(dir:*)",
      "Bash(npx prisma db pull:*)",
      "Bash(pg_dump:*)",
      "Bash(cmd /c \"set PGPASSWORD=postgres && \"\"C:\\\\Program Files\\\\PostgreSQL\\\\13\\\\bin\\\\pg_dump.exe\"\" -U postgres -h localhost -d attendance_db --no-owner --no-acl -f \"\"C:\\\\Users\\\\Administrator\\\\Downloads\\\\attendance system\\\\attendance-system\\\\backend\\\\local_backup.sql\"\"\")",
      "Bash(cmd /c \"set PGPASSWORD=postgres && \"\"C:\\\\Program Files\\\\PostgreSQL\\\\13\\\\bin\\\\pg_dump.exe\"\" -U postgres -h localhost -d attendance_db --no-owner --no-acl\")",
      "Bash(findstr:*)",
      "Bash(\"C:\\\\Users\\\\Administrator\\\\Downloads\\\\attendance system\\\\attendance-system\\\\backend\\\\dump_db.bat\")",
      "Bash(tar:*)",
      "Bash(ls -la \"C:\\\\Users\\\\Administrator\\\\Downloads\\\\attendance system\\\\attendance-system\\\\web-admin\\\\src\\\\pages\\\\salary\"\" 2>&1 | grep -E \"Page)",
      "Bash(.tsx \")",
      "WebFetch(domain:72.61.239.170)",
      "Bash(if exist dist.zip del dist.zip)",
      "Bash(if exist backend-dist.zip del backend-dist.zip)",
      "Bash(أيام الغياب:\", absentDays\\);\n    console.log\\(\"دقائق التأخير:\", lateMinutes, \")",
      "Bash(مرات التأخير:\", lateCount\\);\n    console.log\\(\"ساعات إضافية:\", \\(overtimeMinutes/60\\).toFixed\\(1\\)\\);\n    \n    const lateDeduction = \\(lateMinutes / 60\\) * hourlyRate;\n    const absenceDeduction = absentDays * dailyRate;\n    const overtimeAmount = \\(overtimeMinutes / 60\\) * hourlyRate * \\(settings?.overtimeMultiplier || 1.5\\);\n    \n    let gosiBase = baseSalary;\n    if \\(settings?.gosiMaxSalary && gosiBase > settings.gosiMaxSalary\\) gosiBase = settings.gosiMaxSalary;\n    const gosiEmployee = gosiBase * \\(\\(settings?.gosiEmployeePercent || 9.75\\) / 100\\);\n    const sanedEmployee = settings?.enableSanedCalculation ? gosiBase * \\(\\(settings?.sanedEmployeePercent || 0.75\\) / 100\\) : 0;\n    \n    const totalDeductions = lateDeduction + absenceDeduction + gosiEmployee + sanedEmployee;\n    const grossSalary = baseSalary + overtimeAmount;\n    const netSalary = grossSalary - totalDeductions;\n    \n    console.log\\(\"n--- الحساب ---\"\\);\n    console.log\\(\"الراتب الإجمالي:\", grossSalary.toFixed\\(2\\)\\);\n    console.log\\(\"+ الوقت الإضافي:\", overtimeAmount.toFixed\\(2\\)\\);\n    console.log\\(\"- خصم التأخير:\", lateDeduction.toFixed\\(2\\)\\);\n    console.log\\(\"- خصم الغياب:\", absenceDeduction.toFixed\\(2\\)\\);\n    console.log\\(\"- GOSI:\", gosiEmployee.toFixed\\(2\\)\\);\n    console.log\\(\"- ساند:\", sanedEmployee.toFixed\\(2\\)\\);\n    console.log\\(\"= إجمالي الخصومات:\", totalDeductions.toFixed\\(2\\)\\);\n    console.log\\(\"n=== صافي الراتب:\", netSalary.toFixed\\(2\\), \"ريال ===\"\\);\n    \n    await prisma.$disconnect\\(\\);\n}\ntest\\(\\);\nENDOFFILE\nnode test-payroll-calc.js\")",
      "Bash(zip:*)",
      "Bash(grep:*)",
      "Bash(ls:*)",
      "Bash(timeout 10 cat:*)",
      "Bash(ping:*)",
      "Bash(cd:*)",
      "Bash(sshpass:*)",
      "Bash(plink -ssh -pw \"GamalSaad35@#\" root@72.61.239.170 \"echo connected\")",
      "Bash(cmd.exe /c \"echo Test\")",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command \"Get-Date\")",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command \"& { $env:PATH += '';C:\\\\Windows\\\\System32\\\\OpenSSH''; scp -o StrictHostKeyChecking=no ''C:\\\\Users\\\\Administrator\\\\Downloads\\\\attendance system\\\\attendance-system\\\\backend\\\\src\\\\modules\\\\payroll-runs\\\\payroll-runs.service.ts'' root@72.61.239.170:/var/www/attendance-system/backend/src/modules/payroll-runs/ }\")",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'scp -o StrictHostKeyChecking=no \"\"C:\\\\Users\\\\Administrator\\\\Downloads\\\\attendance system\\\\attendance-system\\\\backend\\\\src\\\\modules\\\\payroll-runs\\\\payroll-runs.service.ts\"\" root@72.61.239.170:/var/www/attendance-system/backend/src/modules/payroll-runs/')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"ls -la /var/www/attendance-system/backend/src/modules/payroll-runs/\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'scp -o StrictHostKeyChecking=no \"\"C:\\\\Users\\\\Administrator\\\\Downloads\\\\attendance system\\\\attendance-system\\\\backend\\\\src\\\\modules\\\\payroll-calculation\\\\payroll-calculation.service.ts\"\" root@72.61.239.170:/var/www/attendance-system/backend/src/modules/payroll-calculation/')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'scp -o StrictHostKeyChecking=no \"\"C:\\\\Users\\\\Administrator\\\\Downloads\\\\attendance system\\\\attendance-system\\\\backend\\\\src\\\\modules\\\\payroll-calculation\\\\dto\\\\calculation.types.ts\"\" root@72.61.239.170:/var/www/attendance-system/backend/src/modules/payroll-calculation/dto/')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'scp -o StrictHostKeyChecking=no \"\"C:\\\\Users\\\\Administrator\\\\Downloads\\\\attendance system\\\\attendance-system\\\\backend\\\\prisma\\\\schema.prisma\"\" root@72.61.239.170:/var/www/attendance-system/backend/prisma/')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"cd /var/www/attendance-system/backend && npx prisma generate\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"cd /var/www/attendance-system/backend && npx prisma migrate deploy 2>&1\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"cd /var/www/attendance-system/backend && npx prisma db push 2>&1\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"cd /var/www/attendance-system/backend && npm run build 2>&1\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"cd /var/www/attendance-system/backend && npx prisma db push --accept-data-loss 2>&1\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"grep -A10 \\\\\"\"enum PayslipLineSource\\\\\"\" /var/www/attendance-system/backend/prisma/schema.prisma 2>&1\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"grep -A10 PayslipLineSource /var/www/attendance-system/backend/prisma/schema.prisma\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"cd /var/www/attendance-system/backend && npm run build\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"grep -A10 PayslipLineSource /var/www/attendance-system/backend/node_modules/.prisma/client/index.d.ts\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"cd /var/www/attendance-system/backend && rm -rf node_modules/.prisma node_modules/@prisma/client && npm install @prisma/client && npx prisma generate\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"grep -A8 \\\\\"\"PayslipLineSource:\\\\\"\" /var/www/attendance-system/backend/node_modules/.prisma/client/index.d.ts | head -10\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"pm2 restart backend && pm2 status\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"curl -s http://localhost:3000/api/health\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"curl -s http://localhost:3000/api\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"pm2 logs backend --lines 30 --nostream\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"cd /var/www/attendance-system/backend && node test-payroll-vps.js\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"cat > /tmp/test-payroll-full.js << ''SCRIPT''\nconst { PrismaClient } = require\\(\\\\\"\"@prisma/client\\\\\"\"\\);\nconst prisma = new PrismaClient\\(\\);\n\nasync function testPayrollService\\(\\) {\n    // Get first active employee with salary assignment\n    const employee = await prisma.user.findFirst\\({\n        where: { \n            status: \\\\\"\"ACTIVE\\\\\"\",\n            salaryAssignments: { some: { isActive: true } }\n        },\n        include: {\n            salaryAssignments: { where: { isActive: true }, include: { structure: true } },\n            company: true\n        }\n    }\\);\n    \n    if \\(!employee\\) {\n        console.log\\(\\\\\"\"No active employee with salary found\\\\\"\"\\);\n        return;\n    }\n    \n    console.log\\(\\\\\"\"Testing with employee:\\\\\"\", employee.firstName, employee.lastName\\);\n    console.log\\(\\\\\"\"Company:\\\\\"\", employee.company?.nameAr\\);\n    \n    // Get payroll period\n    const period = await prisma.payrollPeriod.findFirst\\({\n        where: { companyId: employee.companyId },\n        orderBy: { startDate: \\\\\"\"desc\\\\\"\" }\n    }\\);\n    \n    if \\(period\\) {\n        console.log\\(\\\\\"\"Latest Period:\\\\\"\", period.month + \\\\\"\"/\\\\\"\" + period.year, \\\\\"\"Status:\\\\\"\", period.status\\);\n    }\n    \n    // Get latest payslip\n    const payslip = await prisma.payslip.findFirst\\({\n        where: { employeeId: employee.id },\n        orderBy: { createdAt: \\\\\"\"desc\\\\\"\" },\n        include: { lines: true }\n    }\\);\n    \n    if \\(payslip\\) {\n        console.log\\(\\\\\"\"\\\\\\\\nLatest Payslip:\\\\\"\"\\);\n        console.log\\(\\\\\"\"  Gross:\\\\\"\", Number\\(payslip.grossSalary\\).toFixed\\(2\\)\\);\n        console.log\\(\\\\\"\"  Deductions:\\\\\"\", Number\\(payslip.totalDeductions\\).toFixed\\(2\\)\\);\n        console.log\\(\\\\\"\"  Net:\\\\\"\", Number\\(payslip.netSalary\\).toFixed\\(2\\)\\);\n        console.log\\(\\\\\"\"  Status:\\\\\"\", payslip.status\\);\n        console.log\\(\\\\\"\"  Lines:\\\\\"\", payslip.lines.length\\);\n    }\n    \n    // Check payroll settings\n    const settings = await prisma.payrollSettings.findUnique\\({\n        where: { companyId: employee.companyId }\n    }\\);\n    \n    if \\(settings\\) {\n        console.log\\(\\\\\"\"\\\\\\\\nPayroll Settings:\\\\\"\"\\);\n        console.log\\(\\\\\"\"  Max Deduction %:\\\\\"\", settings.maxDeductionPercent\\);\n        console.log\\(\\\\\"\"  GOSI Enabled:\\\\\"\", settings.enableGosiCalculation\\);\n        console.log\\(\\\\\"\"  Late Method:\\\\\"\", settings.lateDeductionMethod\\);\n    }\n    \n    console.log\\(\\\\\"\"\\\\\\\\n✅ Payroll system is working correctly!\\\\\"\"\\);\n    await prisma.\\\\$disconnect\\(\\);\n}\n\ntestPayrollService\\(\\).catch\\(e => { console.error\\(e\\); process.exit\\(1\\); }\\);\nSCRIPT\nnode /tmp/test-payroll-full.js\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'scp -o StrictHostKeyChecking=no \"\"C:\\\\Users\\\\Administrator\\\\Downloads\\\\attendance system\\\\attendance-system\\\\backend\\\\test-payroll-full.js\"\" root@72.61.239.170:/var/www/attendance-system/backend/')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"cd /var/www/attendance-system/backend && node test-payroll-full.js\"\"')",
      "Bash(/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -Command 'scp -o StrictHostKeyChecking=no \"\"C:\\\\Users\\\\Administrator\\\\Downloads\\\\attendance system\\\\attendance-system\\\\backend\\\\test-payroll-full.js\"\" root@72.61.239.170:/var/www/attendance-system/backend/ && ssh -o StrictHostKeyChecking=no root@72.61.239.170 \"\"cd /var/www/attendance-system/backend && node test-payroll-full.js\"\"')",
      "Bash(npx jest:*)",
      "Bash(npx prisma validate:*)",
      "Bash(git push:*)",
      "Bash(certutil -hashfile \"C:\\\\Users\\\\Administrator\\\\Downloads\\\\attendance system\\\\attendance-system\\\\backend\\\\prisma\\\\schema.prisma\" MD5)",
      "Bash(timeout 90 cat:*)",
      "Bash(timeout:*)"
    ]
  }
}
